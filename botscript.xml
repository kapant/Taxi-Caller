<context>
	<pattern name = "From" value = "$Text"/>
	<pattern name = "To" value = "$Text"/>
	<input pattern = "* такси * { [(от|с) [$From]] * [(до|к) [$To]] }">
  		<context if = "empty($From)" modal = "true">
			<output value = "Откуда едем?"/>
			<input pattern = "$From">
				<context id = "empty_to" if = "empty($To)"/>
				<context id = "done"/>
			</input>
		</context>
		<context if = "empty($To)" modal = "true" id = "empty_to">
			<output value = "Куда едем?"/>
			<input pattern = "$To">
				<context id = "done"/>
			</input>
		</context>
		<context id = "done">
			<output value = "Нужно такси от $From до $To, верно?"/>
		</context>
	</input>
	<input pattern = " * (адрес) $Text">
		<get url = "https://geocode-maps.yandex.ru/1.x/" var = "Place">
			<param name = "format" value = "json"/>
			<param name = "geocode" value = "$Text"/>
		</get>
		<output>
			<script>
				Place.response.GeoObjectCollection.featureMember.GeoObject.metaDataProperty.GeocoderMetaData.text;
			</script>
		</output>
	</input>
</context>
